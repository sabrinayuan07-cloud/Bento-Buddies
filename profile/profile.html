<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - UBC Meetup</title>
    <link rel="stylesheet" href="profile.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="../home/home.html"><button>Home</button></a>
            <a href="../maps/maps.html"><button>Maps</button></a>
            <a href="../events/events.html"><button>Events</button></a>
            <a href="../messages/messages.html"><button>Messages</button></a>
            <a href="../profile/profile.html"><button class="active">Profile</button></a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="profile-container">
        <!-- Left Section -->
        <div class="left-section">
            <!-- Profile Picture -->
            <div class="profile-picture-wrapper">
                <div class="profile-picture" id="profilePicture">
                    <img id="profileImg" src="" alt="Profile Picture" style="display: none;">
                    <div class="upload-overlay" id="uploadOverlay">
                        <span>üì∑</span>
                        <p>Upload Photo</p>
                    </div>
                </div>
                <input type="file" id="fileInput" accept="image/*" style="display: none;">
            </div>

            <!-- Year -->
            <div class="info-field">
                <span class="label">Year:</span>
                <span class="value" id="yearDisplay"></span>
                <input type="number" class="edit-input" id="yearInput" min="1" max="7" value="" style="display: none;">
            </div>

            <!-- Major -->
            <div class="info-field">
                <span class="label">Major:</span>
                <span class="value" id="majorDisplay"></span>
                <input type="text" class="edit-input" id="majorInput" value="" style="display: none;">
            </div>

            <!-- Favorite Foods -->
            <div class="favorite-foods">
                <div class="food-item" data-index="0">
                    <span class="food-emoji"></span>
                </div>
                <div class="food-item" data-index="1">
                    <span class="food-emoji"></span>
                </div>
                <div class="food-item" data-index="2">
                    <span class="food-emoji"></span>
                </div>
            </div>
        </div>

        <!-- Right Section -->
        <div class="right-section">
            <!-- Header with Name and Edit Button -->
            <div class="profile-header">
                <div class="name-section">
                    <h1 id="nameDisplay">Loading...</h1>
                    <input type="text" class="edit-input name-input" id="nameInput" value="" style="display: none;">
                    <p id="usernameDisplay"></p>
                    <input type="text" class="edit-input username-input" id="usernameInput" value="" style="display: none;">
                </div>
                <button class="edit-btn" id="editBtn">Edit</button>
            </div>

            <!-- Bio Section -->
            <div class="bio-section">
                <img src="peeking.png" alt="Red Panda" class="peeking-panda">
                <div class="bio-text" id="bioDisplay">Loading your profile...</div>
                <textarea class="bio-input" id="bioInput" style="display: none;"></textarea>
            </div>

            <!-- Personality Tags -->
            <div class="personality-section">
                <span class="label">Personality:</span>
                <div class="tags-container" id="tagsContainer"></div>
                <button class="add-tag-btn" id="addTagBtn" style="display: none;">+ Add Tag</button>
            </div>

            <!-- Fun Fact -->
            <div class="info-row">
                <span class="label">Fun Fact:</span>
                <span class="value" id="funFactDisplay"></span>
                <input type="text" class="edit-input" id="funFactInput" value="" style="display: none;">
            </div>

            <!-- Last Meal on Earth -->
            <div class="info-row">
                <span class="label">Last Meal on Earth:</span>
                <span class="value" id="lastMealDisplay"></span>
                <input type="text" class="edit-input" id="lastMealInput" value="" style="display: none;">
            </div>

            <!-- Save/Cancel Buttons (hidden by default) -->
            <div class="action-buttons" id="actionButtons" style="display: none;">
                <button class="cancel-btn" id="cancelBtn">Cancel</button>
                <button class="save-btn" id="saveBtn">Save Changes</button>
            </div>

            <!-- Logout Button -->
            <div class="logout-button-container">
                <button class="logout-btn" id="logoutBtn">Logout</button>
            </div>
        </div>
    </div>

    <!-- Tag Modal -->
    <div class="modal" id="tagModal">
        <div class="modal-content">
            <h2>Add Personality Tag</h2>
            <input type="text" id="newTagInput" placeholder="Enter tag (e.g., Adventurous)">
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" id="cancelTagBtn">Cancel</button>
                <button class="modal-btn confirm-btn" id="confirmTagBtn">Add</button>
            </div>
        </div>
    </div>

    <!-- Food Selection Modal -->
    <div class="modal" id="foodModal">
        <div class="modal-content food-modal">
            <h2>Select Favorite Foods</h2>
            <p class="modal-subtitle">Choose up to 3 favorite foods</p>
            <div class="food-emoji-grid" id="profileFoodEmojiGrid">
                <div class="food-emoji-item" data-emoji="üçï">üçï</div>
                <div class="food-emoji-item" data-emoji="üçî">üçî</div>
                <div class="food-emoji-item" data-emoji="üçú">üçú</div>
                <div class="food-emoji-item" data-emoji="üç±">üç±</div>
                <div class="food-emoji-item" data-emoji="üç£">üç£</div>
                <div class="food-emoji-item" data-emoji="üåÆ">üåÆ</div>
                <div class="food-emoji-item" data-emoji="üçù">üçù</div>
                <div class="food-emoji-item" data-emoji="üçõ">üçõ</div>
                <div class="food-emoji-item" data-emoji="üç≤">üç≤</div>
                <div class="food-emoji-item" data-emoji="ü•ó">ü•ó</div>
                <div class="food-emoji-item" data-emoji="ü•™">ü•™</div>
                <div class="food-emoji-item" data-emoji="üåØ">üåØ</div>
                <div class="food-emoji-item" data-emoji="ü•ô">ü•ô</div>
                <div class="food-emoji-item" data-emoji="üçñ">üçñ</div>
                <div class="food-emoji-item" data-emoji="üçó">üçó</div>
                <div class="food-emoji-item" data-emoji="ü•ò">ü•ò</div>
                <div class="food-emoji-item" data-emoji="üç§">üç§</div>
                <div class="food-emoji-item" data-emoji="ü•ü">ü•ü</div>
                <div class="food-emoji-item" data-emoji="üç¢">üç¢</div>
                <div class="food-emoji-item" data-emoji="ü•û">ü•û</div>
            </div>
            <div class="selected-count" id="profileFoodSelectedCount" style="text-align: center; margin: 1rem 0; color: #666; font-size: 14px;">0 / 3 selected</div>
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" id="cancelFoodBtn">Cancel</button>
                <button class="modal-btn confirm-btn" id="confirmFoodBtn">Save</button>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div class="modal" id="logoutModal">
        <div class="modal-content">
            <h2>Confirm Logout</h2>
            <p style="color: #666; margin: 1.5rem 0; text-align: center;">Are you sure you want to log out?</p>
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" id="cancelLogoutBtn">Cancel</button>
                <button class="modal-btn confirm-btn" id="confirmLogoutBtn">Log Out</button>
            </div>
        </div>
    </div>

    <script type="module" src="profile-firebase.js"></script>
</body>
</html>